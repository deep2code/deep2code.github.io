<!DOCTYPE html>
<html lang="zh" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.101.0" />
    <meta name="description" content="">
<meta name="author" content="deep2code">

    <link rel="icon" href="/images/favicon.jpeg" type="image/jpeg">

    <title>mysql :: 技术博客</title>

    
    <link href="/css/nucleus.css?1677750506" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1677750506" rel="stylesheet">
    <link href="/css/hybrid.css?1677750506" rel="stylesheet">
    <link href="/css/featherlight.min.css?1677750506" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1677750506" rel="stylesheet">
    <link href="/css/auto-complete.css?1677750506" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1677750506" rel="stylesheet">
    <link href="/css/theme.css?1677750506" rel="stylesheet">
    <link href="/css/tabs.css?1677750506" rel="stylesheet">
    <link href="/css/hugo-theme.css?1677750506" rel="stylesheet">
    
    <link href="/css/theme-blue.css?1677750506" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1677750506"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/mysql/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="/"><img id="logo" src= "/images/logo.jpeg" ></img></a>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1677750506"></script>
<script type="text/javascript" src="/js/auto-complete.js?1677750506"></script>
<script type="text/javascript">
    
        var baseurl = "\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1677750506"></script>

    
  </div>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/ai/" title="Ais" class="dd-item
        
        
        
        ">
      <a href="/ai/">
          Ais
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/ai/__index/" title="ai" class="dd-item ">
        <a href="/ai/__index/">
        ai
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/elastic/" title="elastic" class="dd-item
        
        
        
        ">
      <a href="/elastic/">
          elastic
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/flutter/" title="flutter" class="dd-item
        
        
        
        ">
      <a href="/flutter/">
          flutter
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/git/" title="git" class="dd-item
        
        
        
        ">
      <a href="/git/">
          git
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/golang/" title="golang" class="dd-item
        
        
        
        ">
      <a href="/golang/">
          golang
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/golang/context/" title="context" class="dd-item ">
        <a href="/golang/context/">
        context
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/echo/" title="echo" class="dd-item ">
        <a href="/golang/echo/">
        echo
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/regexp/" title="exgexp包" class="dd-item ">
        <a href="/golang/regexp/">
        exgexp包
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/freetype/" title="freetype" class="dd-item ">
        <a href="/golang/freetype/">
        freetype
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/gin/" title="gin" class="dd-item ">
        <a href="/golang/gin/">
        gin
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/go-git/" title="go-git" class="dd-item ">
        <a href="/golang/go-git/">
        go-git
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/io/" title="io包" class="dd-item ">
        <a href="/golang/io/">
        io包
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/iris/" title="iris" class="dd-item ">
        <a href="/golang/iris/">
        iris
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/log/" title="log" class="dd-item ">
        <a href="/golang/log/">
        log
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/shell/" title="shell" class="dd-item ">
        <a href="/golang/shell/">
        shell
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/sort/" title="sort包" class="dd-item ">
        <a href="/golang/sort/">
        sort包
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/stringer/" title="stringer" class="dd-item ">
        <a href="/golang/stringer/">
        stringer
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/package/" title="常用包" class="dd-item ">
        <a href="/golang/package/">
        常用包
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/code/" title="代码片断" class="dd-item ">
        <a href="/golang/code/">
        代码片断
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/generic/" title="泛型" class="dd-item ">
        <a href="/golang/generic/">
        泛型
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/golang/groupby/" title="泛型切片分组" class="dd-item ">
        <a href="/golang/groupby/">
        泛型切片分组
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/grpc/" title="grpc" class="dd-item
        
        
        
        ">
      <a href="/grpc/">
          grpc
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/grpc/golang/" title="golang示例" class="dd-item ">
        <a href="/grpc/golang/">
        golang示例
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/mac/" title="mac" class="dd-item
        
        
        
        ">
      <a href="/mac/">
          mac
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/memcached/" title="memcached" class="dd-item
        
        
        
        ">
      <a href="/memcached/">
          memcached
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/mysql/" title="mysql" class="dd-item
        
        active
        
        ">
      <a href="/mysql/">
          mysql
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/nginx/" title="nginx" class="dd-item
        
        
        
        ">
      <a href="/nginx/">
          nginx
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/nginx/http/" title="HTTP模块" class="dd-item
        
        
        
        ">
      <a href="/nginx/http/">
          HTTP模块
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/nginx/rtmp/" title="rtmp" class="dd-item
        
        
        
        ">
      <a href="/nginx/rtmp/">
          rtmp
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/nginx/use/" title="常用技巧" class="dd-item
        
        
        
        ">
      <a href="/nginx/use/">
          常用技巧
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/nginx/install/" title="源码安装剖析" class="dd-item
        
        
        
        ">
      <a href="/nginx/install/">
          源码安装剖析
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/python/" title="python" class="dd-item
        
        
        
        ">
      <a href="/python/">
          python
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/redis/" title="redis" class="dd-item
        
        
        
        ">
      <a href="/redis/">
          redis
          
      </a>
      
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/other/" title="更多" class="dd-item
        
        
        
        ">
      <a href="/other/">
          更多
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/other/brew/" title="brew-酿制" class="dd-item
        
        
        
        ">
      <a href="/other/brew/">
          brew-酿制
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/docker/" title="docker" class="dd-item
        
        
        
        ">
      <a href="/other/docker/">
          docker
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/firefox/" title="firefox" class="dd-item
        
        
        
        ">
      <a href="/other/firefox/">
          firefox
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/github/" title="github" class="dd-item
        
        
        
        ">
      <a href="/other/github/">
          github
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/gitlab/" title="gitlab" class="dd-item
        
        
        
        ">
      <a href="/other/gitlab/">
          gitlab
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/harbor/" title="harbor" class="dd-item
        
        
        
        ">
      <a href="/other/harbor/">
          harbor
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/hugo/" title="hugo" class="dd-item
        
        
        
        ">
      <a href="/other/hugo/">
          hugo
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/machinelearn/" title="machinelearn" class="dd-item
        
        
        
        ">
      <a href="/other/machinelearn/">
          machinelearn
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/makefile/" title="makefile" class="dd-item
        
        
        
        ">
      <a href="/other/makefile/">
          makefile
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/markdown/" title="markdown" class="dd-item
        
        
        
        ">
      <a href="/other/markdown/">
          markdown
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/mermaid/" title="mermaid-美人鱼" class="dd-item
        
        
        
        ">
      <a href="/other/mermaid/">
          mermaid-美人鱼
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/rpc/" title="rpc" class="dd-item
        
        
        
        ">
      <a href="/other/rpc/">
          rpc
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/rust/" title="Rust" class="dd-item
        
        
        
        ">
      <a href="/other/rust/">
          Rust
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/shell/" title="shell" class="dd-item
        
        
        
        ">
      <a href="/other/shell/">
          shell
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/svn/" title="svn" class="dd-item
        
        
        
        ">
      <a href="/other/svn/">
          svn
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/tesseract/" title="tesseract" class="dd-item
        
        
        
        ">
      <a href="/other/tesseract/">
          tesseract
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/unity/" title="unity" class="dd-item
        
        
        
        ">
      <a href="/other/unity/">
          unity
          
      </a>
      
      
        <ul>
          
          
            
          
          

        
          
            
            




 
  
    
    <li data-nav-id="/other/unity/et/" title="ET框架" class="dd-item
        
        
        
        ">
      <a href="/other/unity/et/">
          ET框架
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/vim/" title="vim" class="dd-item
        
        
        
        ">
      <a href="/other/vim/">
          vim
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/wasm/" title="wasm" class="dd-item
        
        
        
        ">
      <a href="/other/wasm/">
          wasm
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/web/" title="web" class="dd-item
        
        
        
        ">
      <a href="/other/web/">
          web
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/windows/" title="windows" class="dd-item
        
        
        
        ">
      <a href="/other/windows/">
          windows
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/wireshark/" title="wireshark" class="dd-item
        
        
        
        ">
      <a href="/other/wireshark/">
          wireshark
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/aliyun/" title="阿里云" class="dd-item
        
        
        
        ">
      <a href="/other/aliyun/">
          阿里云
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/geocode/" title="地理编码" class="dd-item
        
        
        
        ">
      <a href="/other/geocode/">
          地理编码
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/search/" title="搜索技巧" class="dd-item
        
        
        
        ">
      <a href="/other/search/">
          搜索技巧
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/tencent/" title="腾讯" class="dd-item
        
        
        
        ">
      <a href="/other/tencent/">
          腾讯
          
      </a>
      
      
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/other/opensource/" title="优秀开源软件" class="dd-item
        
        
        
        ">
      <a href="/other/opensource/">
          优秀开源软件
          
      </a>
      
      
    </li>
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    

    
    <section id="footer">
      

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            <a href='/'>主页</a> > mysql
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#sql">SQL</a></li>
        <li><a href="#数据类型">数据类型</a></li>
        <li><a href="#分区表">分区表</a></li>
        <li><a href="#特有功能">特有功能</a></li>
        <li><a href="#explain优化sql">explain优化sql</a></li>
        <li><a href="#碎片产生的原因">碎片产生的原因</a></li>
        <li><a href="#免密码登陆">免密码登陆</a></li>
        <li><a href="#小知识">小知识</a></li>
        <li><a href="#附录">附录</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              mysql
            </h1>
          

        



	<h3 id="sql">SQL</h3>
<ul>
<li>
<p>mysql没有完全实现<a href="https://datacadamia.com/data/type/relation/sql/ansi">sql标准</a></p>
</li>
<li>
<p>不区分大小写,一般内置关键词,函数等采用大写,用户表,列,参数采用小写</p>
</li>
<li>
<p>用分号作为结束语句标识,允许一行多条语句,一条语句多行.</p>
</li>
<li>
<p>有不同模式,建议采用strict mode</p>
</li>
<li>
<p>默认autocommit,除非显式取消</p>
</li>
<li>
<p>注释</p>
<ul>
<li>单行: 以#开头,到行结束</li>
<li>单行: 以&ndash; 开头,到行结束</li>
<li>多行: /<em>开头，</em>/结束,c风格</li>
</ul>
</li>
<li>
<p>字符集(Character)与校对规则(Collation)</p>
<ul>
<li>字符集都对应着一个默认的校对规则,也可以对应多个规则</li>
<li>变量character_set_server记录服务器默认值,mysql8.0默认是utf8mb4(可储各种表情符号,最长4字节)</li>
<li>每个库/表/字段可单独指定,库不指定则用服务器,表不指定则用库,字段不指定则用表</li>
<li>character_set_client服务器认为客户端发送过来的sql语句的编码</li>
<li>character_set_conneciton执行sql内部编码,所以服务器把客户端发送的sql从character_set_client转为character_set_conneciton</li>
<li>character_set_results 返回结果集</li>
<li>客户端用连接参数一次性指定这三个值character_set_client, character_set_results, character_set_connection</li>
</ul>
</li>
<li>
<p>自带4个数据库</p>
<ul>
<li>information_schema 保存所有数据库/表/列/索引/权限等信息</li>
<li>performance_schema 收集数据库服务器性能参数，资源消息，资源等待</li>
<li>sys 存储来自performance_schema,简化说明，易于DBA理解</li>
<li>mysql 存储库用户，权限，关键字等mysql自已需要必要信息</li>
</ul>
</li>
<li>
<p>程序表</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>mysqld</td>
<td>服务器</td>
</tr>
<tr>
<td>mysqld_safe</td>
<td>用来启动mysqld的脚本</td>
</tr>
<tr>
<td>mysql.server</td>
<td>系统启动脚本,调用mysqld_safe脚本</td>
</tr>
<tr>
<td>mysqld_multi</td>
<td>允许同时多个mysqld进程</td>
</tr>
<tr>
<td>mysql</td>
<td>客户端</td>
</tr>
<tr>
<td>mysqladmin</td>
<td>客户端管理数据库</td>
</tr>
<tr>
<td>mysqldump</td>
<td>客户端导出数据</td>
</tr>
<tr>
<td>mysqlimport</td>
<td>客户端导入数据</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>联表</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>joined_table: <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span>table_reference <span style="color:#960050;background-color:#1e0010">{</span>[<span style="color:#66d9ef">INNER</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">CROSS</span>] <span style="color:#66d9ef">JOIN</span> <span style="color:#f92672">|</span> STRAIGHT_JOIN<span style="color:#960050;background-color:#1e0010">}</span> table_factor [join_specification]
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> table_reference <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">LEFT</span><span style="color:#f92672">|</span><span style="color:#66d9ef">RIGHT</span><span style="color:#960050;background-color:#1e0010">}</span> [<span style="color:#66d9ef">OUTER</span>] <span style="color:#66d9ef">JOIN</span> table_reference join_specification
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> table_reference <span style="color:#66d9ef">NATURAL</span> [<span style="color:#66d9ef">INNER</span> <span style="color:#f92672">|</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">LEFT</span><span style="color:#f92672">|</span><span style="color:#66d9ef">RIGHT</span><span style="color:#960050;background-color:#1e0010">}</span> [<span style="color:#66d9ef">OUTER</span>]] <span style="color:#66d9ef">JOIN</span> table_factor
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>join_specification: <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">ON</span> search_condition
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">USING</span> (join_column_list) <span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span> ...
</span></span></code></pre></div><ul>
<li>
<p>JOIN, CROSS JOIN, and INNER JOIN等价,和sql标准不相同</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// 简化翻译sql逻辑
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// select tbl1.col1, tbl2.col2 from tbl1 inner join tbl2 using(col3) where tbl1.col1 in (5, 6);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// 内联没有指明驱动表,优化器会根据过滤行数少作为驱动表,这里假设选择tbl1作为驱动表
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// STRAIGHT_JOIN用来指定哪个表作为驱动表,示例如下:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// select tbl1.col1, tbl2.col2 from tbl1 STRAIGHT_JOIN tbl2 using(col3) where tbl1.col1 in (5, 6);
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>outer_iter <span style="color:#f92672">=</span> iterator over tbl1 where col1 in (<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>)
</span></span><span style="display:flex;"><span>outer_row <span style="color:#f92672">=</span> outer_iter.next
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> outer_row
</span></span><span style="display:flex;"><span>    inner_iter <span style="color:#f92672">=</span> iterator over tbl2 where col3 <span style="color:#f92672">=</span> outer_row.col3
</span></span><span style="display:flex;"><span>    inner_row <span style="color:#f92672">=</span> inner_iter.next
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> inner_row
</span></span><span style="display:flex;"><span>        output [ outer_row.col1, inner_row.col2]
</span></span><span style="display:flex;"><span>        inner_row <span style="color:#f92672">=</span> inner_iter.next
</span></span><span style="display:flex;"><span>    end
</span></span><span style="display:flex;"><span>    outer_row <span style="color:#f92672">=</span> outer_iter.next
</span></span><span style="display:flex;"><span>end
</span></span></code></pre></div></li>
<li>
<p>LEFT, RIGHT [OUTER] JOIN,外连关键词(outer)可省略,写不写都是一样功能</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#75715e">// 简化翻译sql逻辑
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// select tbl1.col1, tbl2.col2 from tbl1 left outer join tbl2 using(col3) where tbl1.col1 in (5, 6); 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// left,right表明了哪个表作为驱动表
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>outer_iter <span style="color:#f92672">=</span> iterator over tbl1 where col1 in (<span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>)
</span></span><span style="display:flex;"><span>outer_row <span style="color:#f92672">=</span> outer_iter.next
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">while</span> outer_row
</span></span><span style="display:flex;"><span>    inner_iter <span style="color:#f92672">=</span> iterator over tbl2 where col3 <span style="color:#f92672">=</span> outer_row.col3
</span></span><span style="display:flex;"><span>    inner_row <span style="color:#f92672">=</span> inner_iter.next
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> inner_row
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">while</span> inner_row
</span></span><span style="display:flex;"><span>            output [ outer_row.col1, inner_row.col2]
</span></span><span style="display:flex;"><span>            inner_row <span style="color:#f92672">=</span> inner_iter.next
</span></span><span style="display:flex;"><span>        end
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>        output [ outer_row.col1, null]
</span></span><span style="display:flex;"><span>    end
</span></span><span style="display:flex;"><span>        outer_row <span style="color:#f92672">=</span> outer_iter.next
</span></span><span style="display:flex;"><span>end
</span></span></code></pre></div></li>
<li>
<p>FULL OUTER JOIN暂不支持</p>
</li>
<li>
<p>NATURAL表示join_specification采用USING(join_column_list),不用手动写出来,join_column_list选取两个表都有的列名</p>
</li>
<li>
<p>EXPLAIN/DESCRIBE/DESC 作用一样的</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- 获取表结构/信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">EXPLAIN</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DESCRIBE</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DESC</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>tbl_name [col_name <span style="color:#f92672">|</span> wild]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 获取执行计划信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">EXPLAIN</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DESCRIBE</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DESC</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>[explain_type]
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">{</span>explainable_stmt <span style="color:#f92672">|</span> <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">CONNECTION</span> connection_id<span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 获取更详执行计划细信息
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">EXPLAIN</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DESCRIBE</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DESC</span><span style="color:#960050;background-color:#1e0010">}</span> <span style="color:#66d9ef">ANALYZE</span> [FORMAT <span style="color:#f92672">=</span> TREE] select_statement
</span></span><span style="display:flex;"><span>explain_type: <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span>FORMAT <span style="color:#f92672">=</span> format_name
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>format_name: <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span>TRADITIONAL
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> JSON
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> TREE
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span>explainable_stmt: <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">statement</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">statement</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">statement</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">statement</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">REPLACE</span> <span style="color:#66d9ef">statement</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">|</span> <span style="color:#66d9ef">UPDATE</span> <span style="color:#66d9ef">statement</span>
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span></code></pre></div></li>
<li>
<p>help语句</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- 显示select语句语法,较便利
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>HELP <span style="color:#e6db74">&#39;select&#39;</span>
</span></span></code></pre></div><h3 id="数据类型">数据类型</h3>
<hr>
<ul>
<li>
<p>数字,默认是有符号(SIGNED),无符号(UNSIGNED)要特别指定</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>字节数</th>
</tr>
</thead>
<tbody>
<tr>
<td>TINYINT</td>
<td>1</td>
</tr>
<tr>
<td>SMALLINT</td>
<td>2</td>
</tr>
<tr>
<td>MEDIUMINT</td>
<td>3</td>
</tr>
<tr>
<td>INT</td>
<td>4</td>
</tr>
<tr>
<td>BIGINT</td>
<td>8</td>
</tr>
<tr>
<td>FLOAT</td>
<td>4</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>8</td>
</tr>
<tr>
<td>DECIMAL</td>
<td>二进制存储</td>
</tr>
</tbody>
</table>
<ul>
<li>其他有一些别名</li>
<li>All arithmetic is done using signed BIGINT or DOUBLE values</li>
</ul>
</li>
<li>
<p>时间</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>范围</th>
<th>零值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>DATE</td>
<td>&lsquo;1000-01-01&rsquo;到'9999-12-31&rsquo;</td>
<td>&lsquo;0000-00-00&rsquo;</td>
<td>年月日</td>
</tr>
<tr>
<td>TIME</td>
<td>&lsquo;-838:59:59.000000&rsquo;到'838:59:59.000000&rsquo;</td>
<td>&lsquo;00:00:00&rsquo;</td>
<td>时分秒</td>
</tr>
<tr>
<td>DATETIME</td>
<td>&lsquo;1000-01-01 00:00:00&rsquo;到'9999-12-31 23:59:59&rsquo;</td>
<td>0000-00-00 00:00:00</td>
<td>年月日时分秒</td>
</tr>
<tr>
<td>TIMESTAMP</td>
<td>&lsquo;1970-01-01 00:00:01.000000&rsquo;到'2038-01-19 03:14:07.999999&rsquo;</td>
<td>0000-00-00 00:00:00</td>
<td>时间戳</td>
</tr>
<tr>
<td>YEAR</td>
<td>别用</td>
<td>&lsquo;0000&rsquo;</td>
<td>别用,有坑</td>
</tr>
</tbody>
</table>
<ul>
<li>TIME,DATETIME,TIMESTAMP默认精确到秒,增加参数指定精确小数,最多到6位</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> mytime (
</span></span><span style="display:flex;"><span>  id BIGINT UNSIGNED AUTO_INCREMENT <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">--  &#39;00:00:00.000000&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  t TIME(<span style="color:#ae81ff">6</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">--   &#39;1000-01-01 00:00:00.00000&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  dt DATETIME(<span style="color:#ae81ff">5</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>  ts <span style="color:#66d9ef">TIMESTAMP</span>(<span style="color:#ae81ff">4</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>  t2 TIME(<span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>  dt2 DATETIME(<span style="color:#ae81ff">2</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>,
</span></span><span style="display:flex;"><span>  ts2 <span style="color:#66d9ef">TIMESTAMP</span>(<span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">not</span> <span style="color:#66d9ef">null</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><ul>
<li>DATETIME,TIMESTAMP都可以用DEFAULT CURRENT_TIMESTAMP指定默认值</li>
</ul>
</li>
<li>
<p>字符串</p>
<ul>
<li>
<p>char</p>
<ul>
<li>CHAR(len),VARCHAR(len)最多储存len个char字符,储存占用字节由字符集处理</li>
<li>char固定大小,varchar变化大小,指消费储存占用字节</li>
<li>varchar默认去尾空格空白</li>
</ul>
</li>
<li>
<p>binary</p>
<ul>
<li>BINARY(len),VARCHAR(len)最多储存len个字节,字符集转化字符后字节</li>
</ul>
</li>
<li>
<p>短字符串</p>
<table>
<thead>
<tr>
<th>字符存储</th>
<th>字节存储</th>
</tr>
</thead>
<tbody>
<tr>
<td>char</td>
<td>binary</td>
</tr>
<tr>
<td>varchar</td>
<td>varbinary</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>长字符串</p>
<table>
<thead>
<tr>
<th>text(字符存储,类似char)</th>
<th>blob(字节存储,类似binary)</th>
</tr>
</thead>
<tbody>
<tr>
<td>tinytext</td>
<td>tinyblob</td>
</tr>
<tr>
<td>mediumtext</td>
<td>mediumblob</td>
</tr>
<tr>
<td>text</td>
<td>blob</td>
</tr>
<tr>
<td>longtext</td>
<td>longblob</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>
<p>json</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> js(v json);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> js(v) <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;[10, 20, 30]&#39;</span>);
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">into</span> js(v) <span style="color:#66d9ef">values</span>(<span style="color:#e6db74">&#39;{&#34;a&#34;:10}&#39;</span>);
</span></span></code></pre></div></li>
</ul>
<h3 id="分区表">分区表</h3>
<ul>
<li>
<p>分类类型</p>
<ul>
<li>RANGE,分区必须指定范围</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> employees (
</span></span><span style="display:flex;"><span>  id INT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>  fname VARCHAR(<span style="color:#ae81ff">30</span>),
</span></span><span style="display:flex;"><span>  lname VARCHAR(<span style="color:#ae81ff">30</span>),
</span></span><span style="display:flex;"><span>  hired DATE <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;1970-01-01&#39;</span>,
</span></span><span style="display:flex;"><span>  separated DATE <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;9999-12-31&#39;</span>,
</span></span><span style="display:flex;"><span>  job_code INT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>  store_id INT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>PARTITION <span style="color:#66d9ef">BY</span> RANGE (store_id) (
</span></span><span style="display:flex;"><span>  PARTITION p0
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (<span style="color:#ae81ff">6</span>),
</span></span><span style="display:flex;"><span>    PARTITION p1
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (<span style="color:#ae81ff">11</span>),
</span></span><span style="display:flex;"><span>    PARTITION p2
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> (<span style="color:#ae81ff">16</span>),
</span></span><span style="display:flex;"><span>    PARTITION p3
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">LESS</span> <span style="color:#66d9ef">THAN</span> <span style="color:#66d9ef">MAXVALUE</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><ul>
<li>LIST,分区必须指定集合,每条记录只能属于其中一个集合</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> person (
</span></span><span style="display:flex;"><span>  id INT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>  fname VARCHAR(<span style="color:#ae81ff">30</span>),
</span></span><span style="display:flex;"><span>  lname VARCHAR(<span style="color:#ae81ff">30</span>),
</span></span><span style="display:flex;"><span>  hired DATE <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;1970-01-01&#39;</span>,
</span></span><span style="display:flex;"><span>  separated DATE <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;9999-12-31&#39;</span>,
</span></span><span style="display:flex;"><span>  job_code INT,
</span></span><span style="display:flex;"><span>  store_id INT
</span></span><span style="display:flex;"><span>) PARTITION <span style="color:#66d9ef">BY</span> LIST(store_id) (
</span></span><span style="display:flex;"><span>  PARTITION pNorth
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">6</span>, <span style="color:#ae81ff">9</span>, <span style="color:#ae81ff">17</span>),
</span></span><span style="display:flex;"><span>    PARTITION pEast
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">10</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">19</span>, <span style="color:#ae81ff">20</span>),
</span></span><span style="display:flex;"><span>    PARTITION pWest
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">12</span>, <span style="color:#ae81ff">13</span>, <span style="color:#ae81ff">14</span>, <span style="color:#ae81ff">18</span>),
</span></span><span style="display:flex;"><span>    PARTITION pCentral
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">VALUES</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">15</span>, <span style="color:#ae81ff">16</span>)
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><ul>
<li>HASH,注意hash分布,造成热点分区</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> worker (
</span></span><span style="display:flex;"><span>  id INT <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>  fname VARCHAR(<span style="color:#ae81ff">30</span>),
</span></span><span style="display:flex;"><span>  lname VARCHAR(<span style="color:#ae81ff">30</span>),
</span></span><span style="display:flex;"><span>  hired DATE <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;1970-01-01&#39;</span>,
</span></span><span style="display:flex;"><span>  separated DATE <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span> <span style="color:#66d9ef">DEFAULT</span> <span style="color:#e6db74">&#39;9999-12-31&#39;</span>,
</span></span><span style="display:flex;"><span>  job_code INT,
</span></span><span style="display:flex;"><span>  store_id INT
</span></span><span style="display:flex;"><span>) PARTITION <span style="color:#66d9ef">BY</span> [LINEAR] HASH(store_id) PARTITIONS <span style="color:#ae81ff">4</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- LINEAR 带上则指定hash算法
</span></span></span></code></pre></div><ul>
<li>KEY,隐式hash,服务器采用hash(key)实现,可任意类型</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> tm1 (s1 CHAR(<span style="color:#ae81ff">32</span>) <span style="color:#66d9ef">PRIMARY</span> <span style="color:#66d9ef">KEY</span>) PARTITION <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">KEY</span>(s1) PARTITIONS <span style="color:#ae81ff">10</span>;
</span></span></code></pre></div></li>
<li>
<p>分区pruning</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#f92672">#</span>  where子句能够转化为下面两种,optimizer优化器就能选定分区,<span style="color:#960050;background-color:#1e0010">省去不必要查找</span>
</span></span><span style="display:flex;"><span>partition_column <span style="color:#f92672">=</span> constant
</span></span><span style="display:flex;"><span>partition_column <span style="color:#66d9ef">IN</span> (constant1, constant2, ..., constantN)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#66d9ef">select</span> <span style="color:#66d9ef">update</span> <span style="color:#66d9ef">delete</span> <span style="color:#960050;background-color:#1e0010">都需要注意</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#66d9ef">insert</span> <span style="color:#960050;background-color:#1e0010">只会影响一个分区</span>,<span style="color:#960050;background-color:#1e0010">不必考虑分区修剪</span>
</span></span></code></pre></div><ul>
<li>
<p>Subpartitioning 子分区</p>
</li>
<li>
<p>select语法</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span>
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">ALL</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DISTINCT</span> <span style="color:#f92672">|</span> DISTINCTROW ]
</span></span><span style="display:flex;"><span> [HIGH_PRIORITY]
</span></span><span style="display:flex;"><span> [STRAIGHT_JOIN]
</span></span><span style="display:flex;"><span> [SQL_SMALL_RESULT] [SQL_BIG_RESULT] [SQL_BUFFER_RESULT]
</span></span><span style="display:flex;"><span> [SQL_NO_CACHE] [SQL_CALC_FOUND_ROWS]
</span></span><span style="display:flex;"><span>select_expr [, select_expr] ...
</span></span><span style="display:flex;"><span> [into_option]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">FROM</span> table_references
</span></span><span style="display:flex;"><span> [PARTITION partition_list]]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">WHERE</span> where_condition]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#960050;background-color:#1e0010">{</span>col_name <span style="color:#f92672">|</span> expr <span style="color:#f92672">|</span> <span style="color:#66d9ef">position</span><span style="color:#960050;background-color:#1e0010">}</span>, ... [<span style="color:#66d9ef">WITH</span> <span style="color:#66d9ef">ROLLUP</span>]]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">HAVING</span> where_condition]
</span></span><span style="display:flex;"><span> [WINDOW window_name <span style="color:#66d9ef">AS</span> (window_spec)
</span></span><span style="display:flex;"><span> [, window_name <span style="color:#66d9ef">AS</span> (window_spec)] ...]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#960050;background-color:#1e0010">{</span>col_name <span style="color:#f92672">|</span> expr <span style="color:#f92672">|</span> <span style="color:#66d9ef">position</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">ASC</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">DESC</span>], ... [<span style="color:#66d9ef">WITH</span> <span style="color:#66d9ef">ROLLUP</span>]]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">LIMIT</span> <span style="color:#960050;background-color:#1e0010">{</span>[<span style="color:#66d9ef">offset</span>,] <span style="color:#66d9ef">row_count</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">row_count</span> <span style="color:#66d9ef">OFFSET</span> <span style="color:#66d9ef">offset</span><span style="color:#960050;background-color:#1e0010">}</span>]
</span></span><span style="display:flex;"><span> [into_option]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">FOR</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">UPDATE</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">SHARE</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">OF</span> tbl_name [, tbl_name] ...]
</span></span><span style="display:flex;"><span> [NOWAIT <span style="color:#f92672">|</span> SKIP LOCKED]
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">LOCK</span> <span style="color:#66d9ef">IN</span> <span style="color:#66d9ef">SHARE</span> <span style="color:#66d9ef">MODE</span>]
</span></span><span style="display:flex;"><span> [into_option]
</span></span><span style="display:flex;"><span>into_option: <span style="color:#960050;background-color:#1e0010">{</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">INTO</span> OUTFILE <span style="color:#e6db74">&#39;file_name&#39;</span>
</span></span><span style="display:flex;"><span> [CHARACTER <span style="color:#66d9ef">SET</span> charset_name]
</span></span><span style="display:flex;"><span>export_options
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">INTO</span> DUMPFILE <span style="color:#e6db74">&#39;file_name&#39;</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">INTO</span> var_name [, var_name] ...
</span></span><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span></code></pre></div><ul>
<li>insert</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span> [<span style="color:#66d9ef">INTO</span>] tbl_name
</span></span><span style="display:flex;"><span> [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span> [(col_name [, col_name] ...)]
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">{</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">VALUES</span> <span style="color:#f92672">|</span> VALUE<span style="color:#960050;background-color:#1e0010">}</span> (value_list) [, (value_list)] ... <span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">AS</span> row_alias[(col_alias [, col_alias] ...)]]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">ON</span> DUPLICATE <span style="color:#66d9ef">KEY</span> <span style="color:#66d9ef">UPDATE</span> assignment_list]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> [LOW_PRIORITY <span style="color:#f92672">|</span> DELAYED <span style="color:#f92672">|</span> HIGH_PRIORITY] [<span style="color:#66d9ef">IGNORE</span>]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">INTO</span>] tbl_name
</span></span><span style="display:flex;"><span> [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">AS</span> row_alias[(col_alias [, col_alias] ...)]]
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">SET</span> assignment_list
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">ON</span> DUPLICATE <span style="color:#66d9ef">KEY</span> <span style="color:#66d9ef">UPDATE</span> assignment_list]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> [LOW_PRIORITY <span style="color:#f92672">|</span> HIGH_PRIORITY] [<span style="color:#66d9ef">IGNORE</span>]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">INTO</span>] tbl_name
</span></span><span style="display:flex;"><span> [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span> [(col_name [, col_name] ...)]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">AS</span> row_alias[(col_alias [, col_alias] ...)]]
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">SELECT</span> ... 
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">table_name</span>
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">VALUES</span> row_constructor_list
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">ON</span> DUPLICATE <span style="color:#66d9ef">KEY</span> <span style="color:#66d9ef">UPDATE</span> assignment_list]
</span></span></code></pre></div><ul>
<li>
<p>实例解释</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- 每列采用默认值插入
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> tbl_name () <span style="color:#66d9ef">VALUES</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 允许后面出现的列引用前面列值
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- AUTO_INCREMENT在列赋值之后,所以引用此列值会为0
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> tbl_name (col1,col2) <span style="color:#66d9ef">VALUES</span>(<span style="color:#ae81ff">15</span>,col1<span style="color:#f92672">*</span><span style="color:#ae81ff">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- With INSERT ... SELECT插入多行,速度较快,ta表中AUTO_INCREMENT仍然自增,先赋值才执行AUTO_INCREMENT
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 等价于 INSERT INTO ta SELECT * FROM tb
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> ta <span style="color:#66d9ef">TABLE</span> tb;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 附上DUPLICATE,要求a,b,c至少一个是唯一或主键
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 当多个是唯一或主键时,任选一个执行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- UPDATE t1 SET c=c+1 WHERE a=1 OR b=2 LIMIT 1;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> t1 (a,b,<span style="color:#66d9ef">c</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>) <span style="color:#66d9ef">ON</span> DUPLICATE <span style="color:#66d9ef">KEY</span> <span style="color:#66d9ef">UPDATE</span> <span style="color:#66d9ef">c</span><span style="color:#f92672">=</span><span style="color:#66d9ef">c</span><span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- VALUES(colname)用来引用指定列插入值,相当于下面两句结果
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- INSERT INTO t1 (a,b,c) VALUES (1,2,3) ON DUPLICATE KEY UPDATE c=3;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- INSERT INTO t1 (a,b,c) VALUES (4,5,6) ON DUPLICATE KEY UPDATE c=9;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> t1 (a,b,<span style="color:#66d9ef">c</span>) <span style="color:#66d9ef">VALUES</span> (<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>),(<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ON</span> DUPLICATE <span style="color:#66d9ef">KEY</span> <span style="color:#66d9ef">UPDATE</span> <span style="color:#66d9ef">c</span><span style="color:#f92672">=</span><span style="color:#66d9ef">VALUES</span>(a)<span style="color:#f92672">+</span><span style="color:#66d9ef">VALUES</span>(b);
</span></span></code></pre></div></li>
<li>
<p>delete</p>
<ul>
<li>
<p>删除自增字段不会重用</p>
</li>
<li>
<p>单表</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> [LOW_PRIORITY] [QUICK] [<span style="color:#66d9ef">IGNORE</span>] <span style="color:#66d9ef">FROM</span> tbl_name [[<span style="color:#66d9ef">AS</span>] tbl_alias]
</span></span><span style="display:flex;"><span>[PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">WHERE</span> where_condition]
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 删除顺序,配合limit可用来分段删除
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>[<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> ...]
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 限制删除行数,通常用来防止删除影响其他业务,每次只删除部分,多次删除
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>[<span style="color:#66d9ef">LIMIT</span> <span style="color:#66d9ef">row_count</span>]
</span></span></code></pre></div><ul>
<li>多表</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> [LOW_PRIORITY] [QUICK] [<span style="color:#66d9ef">IGNORE</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 删除在from之前的表中行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>tbl_name[.<span style="color:#f92672">*</span>] [, tbl_name[.<span style="color:#f92672">*</span>]] ...
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> table_references
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">WHERE</span> where_condition]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> [LOW_PRIORITY] [QUICK] [<span style="color:#66d9ef">IGNORE</span>]
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 删除在from子句中表的行
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">FROM</span> tbl_name[.<span style="color:#f92672">*</span>] [, tbl_name[.<span style="color:#f92672">*</span>]] ...
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">USING</span> table_references
</span></span><span style="display:flex;"><span>[<span style="color:#66d9ef">WHERE</span> where_condition]
</span></span></code></pre></div><ul>
<li>大表删除多行,InnoDB引擎优化</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- 把不删除数据插入一张新表中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">INSERT</span> <span style="color:#66d9ef">INTO</span> t_copy <span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> t <span style="color:#66d9ef">WHERE</span> ... ;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 新表,老表互换名字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">RENAME</span> <span style="color:#66d9ef">TABLE</span> t <span style="color:#66d9ef">TO</span> t_old, t_copy <span style="color:#66d9ef">TO</span> t;
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 删除老表,但名字为改名后
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">TABLE</span> t_old;
</span></span></code></pre></div></li>
<li>
<p>replace</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">REPLACE</span> [LOW_PRIORITY <span style="color:#f92672">|</span> DELAYED]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">INTO</span>] tbl_name
</span></span><span style="display:flex;"><span> [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span> [(col_name [, col_name] ...)]
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">{</span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">VALUES</span> <span style="color:#f92672">|</span> VALUE<span style="color:#960050;background-color:#1e0010">}</span> (value_list) [, (value_list)] ...
</span></span><span style="display:flex;"><span> <span style="color:#f92672">|</span>
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">VALUES</span> row_constructor_list
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">}</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">REPLACE</span> [LOW_PRIORITY <span style="color:#f92672">|</span> DELAYED]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">INTO</span>] tbl_name
</span></span><span style="display:flex;"><span> [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">SET</span> assignment_list
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">REPLACE</span> [LOW_PRIORITY <span style="color:#f92672">|</span> DELAYED]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">INTO</span>] tbl_name
</span></span><span style="display:flex;"><span> [PARTITION (partition_name [, partition_name] ...)]
</span></span><span style="display:flex;"><span> [(col_name [, col_name] ...)]
</span></span><span style="display:flex;"><span> <span style="color:#960050;background-color:#1e0010">{</span><span style="color:#66d9ef">SELECT</span> ... <span style="color:#f92672">|</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#66d9ef">table_name</span><span style="color:#960050;background-color:#1e0010">}</span>
</span></span></code></pre></div><ul>
<li>update</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> [LOW_PRIORITY] [<span style="color:#66d9ef">IGNORE</span>] table_reference
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">SET</span> assignment_list
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">WHERE</span> where_condition]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> ...]
</span></span><span style="display:flex;"><span> [<span style="color:#66d9ef">LIMIT</span> <span style="color:#66d9ef">row_count</span>]
</span></span></code></pre></div><h3 id="特有功能">特有功能</h3>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">show</span> databases;
</span></span><span style="display:flex;"><span>use databasename;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">show</span> tables;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">describe</span> tablename;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">从本地导入数据</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span>windows用<span style="color:#960050;background-color:#1e0010">\</span>r<span style="color:#960050;background-color:#1e0010">\</span>n,mac用<span style="color:#960050;background-color:#1e0010">\</span>r,linux用<span style="color:#960050;background-color:#1e0010">\</span>n
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">LOAD</span> <span style="color:#66d9ef">DATA</span> <span style="color:#66d9ef">LOCAL</span> INFILE <span style="color:#e6db74">&#39;/path/pet.txt&#39;</span> <span style="color:#66d9ef">INTO</span> <span style="color:#66d9ef">TABLE</span> tablename LINES TERMINATED <span style="color:#66d9ef">BY</span> <span style="color:#e6db74">&#39;\r\n&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span>mysql查变量,<span style="color:#960050;background-color:#1e0010">获取</span>mysql默认行为,<span style="color:#960050;background-color:#1e0010">各种参数值</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SHOW</span> VARIABLES;
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">只关注想要的</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SHOW</span> VARIABLES <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;%timeout%&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">查看客户端连接详情</span>,<span style="color:#960050;background-color:#1e0010">用来检查执行客户端的</span>sql情况<span style="color:#960050;background-color:#1e0010">，特别慢查询</span>,<span style="color:#960050;background-color:#1e0010">多连接</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">full</span> processlist;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">客户端连接数</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> client_ip,<span style="color:#66d9ef">count</span>(client_ip) <span style="color:#66d9ef">as</span> client_num 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> (<span style="color:#66d9ef">select</span> substring_index(<span style="color:#66d9ef">host</span>,<span style="color:#e6db74">&#39;:&#39;</span> ,<span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">as</span> client_ip <span style="color:#66d9ef">from</span> information_schema.processlist ) <span style="color:#66d9ef">as</span> connect_info 
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> client_ip <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> client_num <span style="color:#66d9ef">desc</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">执行</span>sql时间倒序
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">from</span> information_schema.processlist <span style="color:#66d9ef">where</span> Command <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#39;Sleep&#39;</span> <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> Time <span style="color:#66d9ef">desc</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">查看表创建语句</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">show</span> <span style="color:#66d9ef">create</span> <span style="color:#66d9ef">table</span> xx;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span>mysql关闭安全模式
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;SQL_SAFE_UPDATES&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> SQL_SAFE_UPDATES <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span><span style="color:#960050;background-color:#1e0010">通用日志</span>,<span style="color:#960050;background-color:#1e0010">调试好帮手</span>,<span style="color:#960050;background-color:#1e0010">需要</span>root权限
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%general%&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> <span style="color:#f92672">@@</span><span style="color:#66d9ef">global</span>.general_log<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> <span style="color:#f92672">@@</span><span style="color:#66d9ef">global</span>.general_log<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">设置连接超时时间</span>,<span style="color:#960050;background-color:#1e0010">下次登陆有效</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">show</span> variables <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%timeout%&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#75715e">--604800=60*60*24
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">set</span> <span style="color:#f92672">@@</span><span style="color:#66d9ef">GLOBAL</span>.interactive_timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">604800</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> <span style="color:#f92672">@@</span><span style="color:#66d9ef">GLOBAL</span>.wait_timeout<span style="color:#f92672">=</span><span style="color:#ae81ff">604800</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">查看默认引擎</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">show</span> engines;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">查询表中重复数据</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> col <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">table</span> <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> col <span style="color:#66d9ef">having</span> <span style="color:#66d9ef">count</span>(col) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">带忽略重复的插入</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">insert</span> <span style="color:#66d9ef">ignore</span> <span style="color:#66d9ef">into</span> <span style="color:#66d9ef">table</span>(name)  value(<span style="color:#e6db74">&#39;xx&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">常用时间函数</span>
</span></span><span style="display:flex;"><span>FROM_UNIXTIME(unix_timestamp)<span style="color:#960050;background-color:#1e0010">是</span>MySQL里的时间函数<span style="color:#960050;background-color:#1e0010">。</span>
</span></span><span style="display:flex;"><span>UNIX_TIMESTAMP(<span style="color:#e6db74">&#39;2018-09-17&#39;</span>) <span style="color:#960050;background-color:#1e0010">是与之相对正好相反的时间函数</span> <span style="color:#960050;background-color:#1e0010">。</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> IF条件表达式
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">IF</span>(expr1,expr2,expr3)
</span></span><span style="display:flex;"><span><span style="color:#75715e">--如果 expr1 为真(expr1 &lt;&gt; 0 以及 expr1 &lt;&gt; NULL)，那么 IF() 返回 expr2，否则返回 expr3。IF() 返回一个数字或字符串，这取决于它被使用的语境：
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span>concat把int转varchar类型
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">update</span> <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">set</span> nickname <span style="color:#f92672">=</span> concat(id,<span style="color:#e6db74">&#39;号&#39;</span>) <span style="color:#66d9ef">where</span> id <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">字符串替换</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">update</span> <span style="color:#66d9ef">user</span> <span style="color:#66d9ef">set</span> nickname <span style="color:#f92672">=</span> <span style="color:#66d9ef">REPLACE</span>(id,<span style="color:#e6db74">&#39;old&#39;</span>, <span style="color:#e6db74">&#39;now&#39;</span>) <span style="color:#66d9ef">where</span> id <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> <span style="color:#960050;background-color:#1e0010">查询数据库占用空间及索引空间</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">#</span> Binlog,<span style="color:#960050;background-color:#1e0010">阿里云的</span>rds默认把它也计算在内,<span style="color:#960050;background-color:#1e0010">要手动设置控制大小</span>.<span style="color:#960050;background-color:#1e0010">大量数据删除时</span>,<span style="color:#960050;background-color:#1e0010">会突然增加</span>Binlog文件
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span> <span style="color:#66d9ef">TABLE_NAME</span>, concat(<span style="color:#66d9ef">truncate</span>(data_length<span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>,<span style="color:#ae81ff">2</span>),<span style="color:#e6db74">&#39; MB&#39;</span>) <span style="color:#66d9ef">as</span> data_size,
</span></span><span style="display:flex;"><span>concat(<span style="color:#66d9ef">truncate</span>(index_length<span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span><span style="color:#f92672">/</span><span style="color:#ae81ff">1024</span>,<span style="color:#ae81ff">2</span>),<span style="color:#e6db74">&#39; MB&#39;</span>) <span style="color:#66d9ef">as</span> index_size
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span> information_schema.tables <span style="color:#66d9ef">where</span> TABLE_SCHEMA <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;databaseName&#39;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># 修改root密码</span>
</span></span><span style="display:flex;"><span>killall mysqld
</span></span><span style="display:flex;"><span>mysqld_safe --skip-grant-tables &amp;
</span></span><span style="display:flex;"><span>update mysql.user set password<span style="color:#f92672">=</span>PASSWORD<span style="color:#f92672">(</span><span style="color:#e6db74">&#39;newpassword&#39;</span><span style="color:#f92672">)</span> where user<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;root&#39;</span>;
</span></span><span style="display:flex;"><span>flush privileges;
</span></span><span style="display:flex;"><span>mysqld_safe &amp;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 设置默认字符集</span>
</span></span><span style="display:flex;"><span>mysql -u user -D db --default-character-set<span style="color:#f92672">=</span>utf8 -p
</span></span></code></pre></div><h3 id="explain优化sql">explain优化sql</h3>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">explain</span> <span style="color:#66d9ef">select</span> col <span style="color:#66d9ef">from</span> <span style="color:#66d9ef">table</span> <span style="color:#66d9ef">where</span> con <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> xx <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> yy;  
</span></span></code></pre></div><p>输出说明:</p>
<ol>
<li>table 显示该语句涉及的表</li>
<li>type 这列很重要，显示了连接使用了哪种类别,有无使用索引，反映语句的质量。</li>
<li>possible_keys 列指出MySQL能使用哪个索引在该表中找到行</li>
<li>key 显示MySQL实际使用的键（索引）。如果没有选择索引，键是NULL。</li>
<li>key_len 显示MySQL决定使用的键长度。如果键是NULL，则长度为NULL。使用的索引的长度。在不损失精确性的情况下，长度越短越好</li>
<li>ref 显示使用哪个列或常数与key一起从表中选择行。</li>
<li>rows 显示MySQL认为它执行查询时必须检查的行数。</li>
<li>extra 包含MySQL解决查询的详细信息。</li>
<li>其中：Explain的type显示的是访问类型，是较为重要的一个指标，结果值从好到坏依次是：
system &gt; const &gt; eq_ref &gt; ref &gt; fulltext &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL（优&ndash;&gt;差）　一般来说，得保证查询至少达到range级别，最好能达到ref，否则就可能会出现性能问题</li>
</ol>
<h3 id="碎片产生的原因">碎片产生的原因</h3>
<hr>
<ul>
<li>表的存储会出现碎片化，每当删除了一行内容，该段空间就会变为空白、被留空，而在一段时间内的大量删除操作，会使这种留空的空间变得比存储列表内容所使用的空间更大；</li>
<li>当执行插入操作时，MySQL会尝试使用空白空间，但如果某个空白空间一直没有被大小合适的数据占用，仍然无法将其彻底占用，就形成了碎片；</li>
<li>当MySQL对数据进行扫描时，它扫描的对象实际是列表的容量需求上限，也就是数据被写入的区域中处于峰值位置的部分；</li>
<li>清除不要数据,记得要optimize table xx;不然空间仍旧占用.</li>
</ul>
<blockquote>
<p>例如：
一个表有1万行，每行10字节，会占用10万字节存储空间，执行删除操作，只留一行，实际内容只剩下10字节，但MySQL在读取时，仍看做是10万字节的表进行处理，所以，碎片越多，就会越来越影响查询性能。</p>
</blockquote>
<h3 id="免密码登陆">免密码登陆</h3>
<ol>
<li>
<p>利用.my.cnf</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>vi ~/.my.cnf
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>client<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 注意mysql的库中user表,localhost和127.0.0.1区别</span>
</span></span><span style="display:flex;"><span>host <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;127.0.0.1&#34;</span>
</span></span><span style="display:flex;"><span>user <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;user&#34;</span>
</span></span><span style="display:flex;"><span>password <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;pwd&#34;</span>
</span></span><span style="display:flex;"><span>database <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;xx&#34;</span>
</span></span></code></pre></div></li>
<li>
<p>利用命令行参数,或者别名</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>mysql -h localhost -u root -p xxx
</span></span></code></pre></div></li>
</ol>
<h3 id="小知识">小知识</h3>
<hr>
<ul>
<li>哪个是JOIN，哪个是过滤器?</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- 隐式内联,不好理解容易出错,不建议
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- a,b ==&gt; inner join 简写
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- a.ID = b.ID ==&gt; 用来关联,不是过滤,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> a,b <span style="color:#66d9ef">WHERE</span> a.ID <span style="color:#f92672">=</span> b.ID
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- 显示内联,建议这种
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- a JOIN b ==&gt; inner join
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> a <span style="color:#66d9ef">JOIN</span> b <span style="color:#66d9ef">ON</span> a.ID <span style="color:#f92672">=</span> b.ID
</span></span><span style="display:flex;"><span><span style="color:#75715e">-- USING(ID) == &gt; ON a.ID = b.ID
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">-- 要求两个表都存在ID列
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> a <span style="color:#66d9ef">JOIN</span> b <span style="color:#66d9ef">USING</span>(ID)
</span></span></code></pre></div><ul>
<li>分组连接</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">select</span> sch_id, <span style="color:#66d9ef">count</span>(sch_id) <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">c</span>, GROUP_CONCAT(sch_name) <span style="color:#66d9ef">from</span> sch_basic_info sbi <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> sch_id <span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">count</span>(sch_id) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span> <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> <span style="color:#66d9ef">c</span> <span style="color:#66d9ef">desc</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span>  GROUP_CONCAT(sch_name) <span style="color:#66d9ef">from</span> sch_basic_info sbi <span style="color:#66d9ef">group</span> <span style="color:#66d9ef">by</span> sch_id <span style="color:#66d9ef">HAVING</span> <span style="color:#66d9ef">count</span>(sch_id) <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>;
</span></span></code></pre></div><ul>
<li>支持opengis,geometry
<img src="mysql_opengis.webp" alt="opengis">
<ul>
<li>Geometry (noninstantiable)</li>
<li>Point (instantiable)</li>
<li>Curve (noninstantiable)</li>
<li>LineString (instantiable)</li>
<li>Line</li>
<li>LinearRing</li>
<li>Surface (noninstantiable)</li>
<li>Polygon (instantiable)</li>
<li>GeometryCollection (instantiable)</li>
<li>MultiPoint (instantiable)</li>
<li>MultiCurve (noninstantiable)</li>
<li>MultiLineString (instantiable)</li>
<li>MultiSurface (noninstantiable)</li>
<li>MultiPolygon (instantiable)</li>
</ul>
</li>
</ul>
<h3 id="附录">附录</h3>
<ul>
<li><a href="https://my.oschina.net/u/4090830/blog/5559454">表一般不超过2000万行</a></li>
<li><a href="https://www.postgresql.org/">postgresql-开源替代品</a></li>
<li><a href="https://www.nebula-graph.io/">c++-图数据库</a></li>
<li><a href="https://github.com/dgraph-io/dgraph">golang-图数据库</a></li>
</ul>





<footer class=" footline" >
	
</footer>


</div>


</div>

<div id="navigation">
    
    

    
    
    
    
    
    
    
    

    
    
    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    
    
    

    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    
    
    

    
    
    

    
    
    
    
    
    
    
    
    

    


    
    
    
    <a class="nav nav-prev" href="/memcached/" title="memcached"> <i class="fa fa-chevron-left"></i></a>
    
    
    <a class="nav nav-next" href="/nginx/" title="nginx" style="margin-right: 0px;"><i
            class="fa fa-chevron-right"></i></a>
    
    
</div>

</section>

<div
    style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
    <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
</div>
<script src="/js/clipboard.min.js?1677750506"></script>
<script src="/js/perfect-scrollbar.min.js?1677750506"></script>
<script src="/js/perfect-scrollbar.jquery.min.js?1677750506"></script>
<script src="/js/jquery.sticky.js?1677750506"></script>
<script src="/js/featherlight.min.js?1677750506"></script>
<script src="/js/highlight.pack.js?1677750506"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/modernizr.custom-3.6.0.js?1677750506"></script>
<script src="/js/learn.js?1677750506"></script>
<script src="/js/hugo-learn.js?1677750506"></script>


<script src="https://cdn.jsdelivr.net/npm/mermaid@8.14.0/dist/mermaid.min.js"></script>

<script>
    mermaid.initialize({
        startOnLoad: true,
        sequence: {showSequenceNumbers: true},
    });
</script>



</body>

</html>